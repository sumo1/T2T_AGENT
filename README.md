# 🎙️ 阿里云语音合成工具

基于阿里云 CosyVoice V2 模型的网页版语音合成与复刻工具，提供友好的用户界面，支持多种音色选择、自定义音色输入、语音复刻等功能。

## 🚨 您是否遇到过这些困扰？

### 😫 痛点场景

**如果您是内容创作者：**
- 录制视频配音时总是NG，一句话要录十几遍？
- 深夜想录音却怕打扰邻居和家人？
- 感冒了声音嘶哑，但视频必须今天发布？

**如果您是教育工作者：**
- 制作几百节网课，嗓子已经说到冒烟？
- 想让教学内容有多种声音演绎，增加趣味性？
- 需要为不同年龄段学生定制不同风格的音频教材？

**如果您是开发者/产品经理：**
- 产品Demo需要语音播报，找不到合适的配音员？
- 智能客服/语音助手需要自然流畅的声音？
- 想快速测试不同音色对用户体验的影响？

**如果您是自媒体运营者：**
- 日更压力大，没时间每天录音？
- 想打造独特的声音IP，但请不起专业配音？
- 需要批量生成多语言版本的音频内容？

### ✨ 这个工具能为您做什么？

- **省钱** - 不用购买昂贵的录音设备，不用租录音棚，不用请配音员！
- **省时** - 1分钟生成10分钟的音频内容，效率提升1000%！
- **省力** - 保护嗓子，随时随地创作，深夜也能"大声说话"！
- **专业** - 基于阿里云最新AI技术，媲美真人的自然度和情感表达！


**🎯 一键解决您的所有语音烦恼！**

1. **秒变配音大师** - 输入文字立即生成专业级配音，告别录音设备，告别后期处理！

2. **8种精选音色任您挑选** - 从温柔女声到东北老铁，从软萌童声到新闻主播，总有一款适合您的内容风格！

3. **独家音色复刻黑科技** - 只需一段音频，即可复刻任何声音！打造专属于您的AI分身，让您的声音永不疲倦！

4. **支持1000+阿里云音色库** - 不满足于预设？直接输入音色代码，解锁海量专业音色，让您的创作无限可能！

5. **零门槛操作** - 无需安装软件，打开网页即用！小白也能3分钟上手，立即产出专业内容！

6. **本地化部署** - 数据安全有保障，API密钥本地存储，您的创作隐私我们守护！


### 💡 典型使用场景

- 📚 **知识付费课程** - 批量生成课程音频，打造爆款网课
- 📱 **短视频配音** - 日更不是梦，优质内容稳定输出
- 🎮 **游戏角色配音** - 为游戏角色赋予生命力
- 📖 **有声书制作** - 将文字作品转化为音频产品
- 🤖 **智能客服** - 打造温暖专业的品牌声音
- 🎬 **影视后期** - 快速生成样片配音，提高制作效率

**🎁 现在就开始，让AI成为您的专属配音师！**

---

## ✨ 功能特性

### 核心功能
- 🎯 **语音合成** - 将文本转换为自然流畅的语音
- 🎭 **语音复刻** - 通过音频URL复刻声音，生成专属音色
- 🔊 **在线试听** - 直接在浏览器中播放生成的语音
- 💾 **音频下载** - 支持将生成的音频保存到本地
- 🔑 **安全管理** - API密钥本地存储，保护隐私安全

### 特色亮点
- 📝 实时字符计数（最多500字）
- 🎨 8种预设音色 + 自定义音色输入
- 📊 显示请求ID和首包延迟等技术指标
- ⌨️ 快捷键支持（Ctrl/Cmd + Enter快速合成）
- 📱 响应式设计，支持移动端访问

## 🎁 免费使用说明

### 💰 阿里云免费额度

**好消息！阿里云为新用户提供了丰厚的免费额度：**

- 🆓 **新用户免费额度** - 首次开通即送百万级token免费额度
- 📊 **CosyVoice-v2 模型** - 每月赠送一定量的免费调用次数
- 🎯 **语音复刻** - 支持免费试用，体验音色克隆黑科技
- ⏰ **有效期长** - 免费额度有效期通常为3-6个月

> 💡 **提示**：对于个人用户和小型项目，免费额度完全够用！

### 🔑 如何获取API密钥

#### 第一步：注册阿里云账号
1. 访问 [阿里云官网](https://www.aliyun.com/)
2. 点击右上角"免费注册"
3. 使用手机号或邮箱完成注册

#### 第二步：开通DashScope服务
1. 登录后访问 [DashScope控制台](https://dashscope.console.aliyun.com/)
2. 首次访问会提示开通服务，点击"立即开通"
3. 选择"免费试用"（新用户专享）

#### 第三步：创建API密钥
1. 在DashScope控制台，点击左侧菜单"API-KEY管理"
2. 点击"创建新的API-KEY"
3. 给密钥起个名字（如：语音合成工具）
4. 复制生成的API密钥并妥善保存

#### 第四步：查看免费额度
1. 在控制台点击"资源包管理"
2. 查看当前可用的免费额度
3. 可以看到各个模型的免费调用次数

### ⚠️ 注意事项

- **密钥安全**：API密钥相当于您的身份凭证，请勿泄露给他人
- **额度监控**：建议定期查看额度使用情况，避免超出免费额度
- **商用说明**：如需商用，建议购买正式资源包，价格相当实惠

### 💸 费用参考（超出免费额度后）

- CosyVoice-v2 语音合成：约 ¥0.1/千字符
- 语音复刻：约 ¥1/次
- 相比传统配音服务，性价比极高！

## 🚀 快速开始

### 前置要求

1. Python 3.8+
2. 阿里云 DashScope API 密钥（按上述步骤获取）

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd alivoice-generator
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **启动服务**
```bash
python app.py
# 或使用启动脚本
bash /Users/sumo/tmpsh/start_alivoice.sh
```

4. **访问应用**

打开浏览器访问: http://localhost:5500

## 📖 使用指南

### 1. 配置API密钥

首次使用需要配置阿里云 DashScope API密钥：

1. 在页面顶部的黄色区域输入您的API密钥
2. 点击"保存密钥"按钮
3. 密钥将安全地保存在浏览器本地存储中

### 2. 语音合成

1. 在文本框输入要合成的内容（最多500字）
2. 选择喜欢的音色：
   - 从预设的8种音色中选择
   - 或在"自定义音色"框中输入音色ID，阿里云音色列表：https://help.aliyun.com/zh/model-studio/cosyvoice-python-sdk?spm=a2c4g.11186623.help-menu-2400256.d_2_6_0_1.f610215dXJ9q8l#dc692b9b51p27
   - 输入对应的音色code即可
   - ![img.png](img.png)
3. 点击"生成语音"按钮
4. 等待生成完成后可以试听和下载

### 3. 语音复刻

1. 准备一个可公开访问的音频文件URL（WAV/MP3格式）
2. 在"语音复刻"区域：
   - 输入音频文件URL
   - 给复刻的音色起个名字
3. 点击"开始复刻"按钮
4. 复刻成功后，可在列表中查看和使用

**示例音频URL：**
```
https://isv-data.oss-cn-hangzhou.aliyuncs.com/ics/MaaS/ASR/test_audio/asr_example_zh.wav
```

### 4. 使用复刻音色

1. 在"已复刻的音色"列表中点击"使用"按钮
2. 音色ID会自动填入"自定义音色"输入框
3. 输入文本后即可使用该音色生成语音

## 🎨 可用音色

### 预设音色
- **龙小淳** - 温柔女声
- **龙小白** - 亲切男声
- **龙杰力豆** - 活泼男童
- **龙老铁** - 东北老铁
- **龙硕** - 新闻男声
- **龙舒** - 温柔女声
- **龙喵喵** - 软萌女童
- **龙媛** - 知性女声

### 自定义音色
支持输入任何有效的音色ID，如：`zhixiaobai`

## 📁 项目结构

```
alivoice-generator/
├── app.py                 # Flask后端应用
├── requirements.txt       # Python依赖
├── README.md             # 项目文档
├── cloned_voices.json    # 复刻音色数据（自动生成）
├── generated_audio/      # 生成的音频文件
├── templates/
│   └── index.html       # 前端页面
└── static/
    ├── css/
    │   └── style.css    # 样式文件
    └── js/
        └── main.js      # JavaScript逻辑
```

## 🔧 API接口

| 接口 | 方法 | 描述 |
|------|------|------|
| `/` | GET | 主页 |
| `/api/voices` | GET | 获取预设音色列表 |
| `/api/synthesize` | POST | 合成语音 |
| `/api/clone-voice` | POST | 复刻语音 |
| `/api/cloned-voices` | GET | 获取已复刻音色列表 |
| `/api/delete-cloned-voice/<voice_id>` | DELETE | 删除复刻音色 |
| `/api/audio/<filename>` | GET | 获取音频文件 |
| `/api/download/<filename>` | GET | 下载音频文件 |

### 请求示例

**语音合成：**
```json
POST /api/synthesize
{
    "text": "你好，世界",
    "voice": "longxiaochun_v2",
    "custom_voice": "",
    "api_key": "your-api-key"
}
```

**语音复刻：**
```json
POST /api/clone-voice
{
    "audio_url": "https://example.com/audio.wav",
    "voice_name": "我的音色",
    "api_key": "your-api-key"
}
```

## ⚙️ 配置说明

### 环境变量
- `DASHSCOPE_API_KEY` - 阿里云API密钥（可选，推荐使用页面配置）

### 限制参数
- 最大文本长度：500字符
- 最大上传文件：16MB
- 音色前缀长度：最多10个字符
- 每个账号最多复刻音色：1000个

## 🔒 安全说明

1. **API密钥安全**
   - API密钥仅存储在浏览器本地localStorage中
   - 不会保存在服务器端
   - 每次请求时动态传递

2. **生产环境部署**
   - 请勿使用Flask内置服务器
   - 推荐使用WSGI服务器（如Gunicorn、uWSGI）
   - 配置HTTPS加密传输

## 🐛 常见问题

### Q: 提示"Model.AccessDenied"错误？
A: 请确认API密钥有权限访问cosyvoice-v2模型。

### Q: 语音复刻失败，提示"download audio failed:404"？
A: 音频URL必须是可公开访问的，请检查URL是否有效。

### Q: 提示"prefix should not be longer than 10 characters"？
A: 这是内部错误，已在最新版本修复。

### Q: 端口5500被占用？
A: 可能是macOS的AirPlay接收器占用，可以修改app.py中的端口号。

## 📝 更新日志

### v1.0.0 (2024-09-18)
- ✅ 基础语音合成功能
- ✅ 多种预设音色选择
- ✅ 自定义音色输入
- ✅ 语音复刻功能
- ✅ 已复刻音色管理
- ✅ API密钥安全管理
- ✅ 响应式界面设计

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

## 📄 许可证

MIT License

## 👥 联系方式

如有问题或建议，请提交Issue。

---

*本工具基于阿里云 DashScope 服务构建，使用前请确保已开通相关服务。*